CREATE TABLE t1 (c1 INT) ENGINE = TOKUDB CHARSET=UTF8;
CREATE TABLE t2 (c1 INT, c2 INT, CLUSTERING KEY (c1)) ENGINE=TOKUDB;
CREATE TABLE t3 (c1 INT, c2 INT, PRIMARY KEY(c1), CLUSTERING KEY(c2)) ENGINE=TOKUDB;
CREATE TABLE t4 (c1 INT, c2 INT, UNIQUE CLUSTERING KEY(c2)) ENGINE=TOKUDB;
CREATE TABLE t5 (c1 INT PRIMARY KEY, c2 INT CLUSTERING KEY, c3 INT UNIQUE) ENGINE=TOKUDB;
CREATE TABLE t6 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=COMPRESSED;
CREATE TABLE t7 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=TOKUDB_UNCOMPRESSED;
CREATE TABLE t8 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=TOKUDB_ZLIB;
CREATE TABLE t9 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=TOKUDB_QUICKLZ;
CREATE TABLE t10 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=TOKUDB_LZMA;
CREATE TABLE t11 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=TOKUDB_FAST;
CREATE TABLE t12 (c1 INT, c2 INT) ENGINE = TOKUDB ROW_FORMAT=TOKUDB_SMALL;
SHOW CREATE TABLE t12;
Table	Create Table
t12	CREATE TABLE `t12` (
  `c1` int(11) DEFAULT NULL,
  `c2` int(11) DEFAULT NULL
) ENGINE=TokuDB DEFAULT CHARSET=latin1 ROW_FORMAT=TOKUDB_LZMA
SELECT TABLE_NAME,ROW_FORMAT FROM INFORMATION_SCHEMA.TABLES WHERE table_schema LIKE 'test' AND table_name LIKE 't%';
TABLE_NAME	ROW_FORMAT
t1	tokudb_zlib
t10	tokudb_lzma
t11	tokudb_quicklz
t12	tokudb_lzma
t2	tokudb_zlib
t3	tokudb_zlib
t4	tokudb_zlib
t5	tokudb_zlib
t6	tokudb_zlib
t7	tokudb_uncompressed
t8	tokudb_zlib
t9	tokudb_quicklz
ALTER TABLE t1 ADD COLUMN c2 INT;
ALTER TABLE t1 ADD COLUMN c3 INT;
ALTER TABLE t1 ADD COLUMN c4 INT;
ALTER TABLE t1 ADD PRIMARY KEY(c1);
ALTER TABLE t1 ADD CLUSTERING KEY(c2,c3);
ALTER TABLE t1 ADD CLUSTERING KEY(c4);
ALTER TABLE t1 DROP KEY c4;
ALTER TABLE t1 DROP COLUMN c4;
ALTER TABLE t1 ADD COLUMN c4 VARCHAR(8192);
ALTER TABLE t1 ADD COLUMN c5 BLOB;
ALTER TABLE t1 ADD KEY(c4,c5(3073));
ERROR 42000: Specified key was too long; max key length is 3072 bytes
ALTER TABLE t1 ADD KEY(c4(1024),c5(2048));
ERROR 42000: Specified key was too long; max key length is 3072 bytes
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c1` int(11) NOT NULL DEFAULT '0',
  `c2` int(11) DEFAULT NULL,
  `c3` int(11) DEFAULT NULL,
  `c4` varchar(8192) DEFAULT NULL,
  `c5` blob,
  PRIMARY KEY (`c1`),
  CLUSTERING KEY `c2` (`c2`,`c3`)
) ENGINE=TokuDB DEFAULT CHARSET=utf8
CREATE TABLE t13 (c1 INT, c2 INT) ENGINE=INNODB;
CREATE TABLE t14 (c1 INT, c2 INT, CLUSTERING KEY(c1)) ENGINE=INNODB;
ERROR HY000: Table storage engine 'InnoDB' does not support the create option 'CLUSTERING'
CREATE TABLE t14 (c1 INT, c2 INT, UNIQUE CLUSTERING KEY(c1)) ENGINE=INNODB;
ERROR HY000: Table storage engine 'InnoDB' does not support the create option 'CLUSTERING'
ALTER TABLE t13 ADD CLUSTERING KEY(c1);
ERROR HY000: Table storage engine 'InnoDB' does not support the create option 'CLUSTERING'
CREATE TABLE t14 (c1 INT PRIMARY KEY) ENGINE=TOKUDB;
CREATE TABLE t15 (c1 INT NOT NULL DEFAULT '0', UNIQUE KEY(c1), CONSTRAINT t1_c1_fk FOREIGN KEY (c1) references t1(c1)) ENGINE=TOKUDB;
ALTER TABLE t15 ADD CONSTRAINT t1_c1_fk FOREIGN KEY (c1) REFERENCES t1(c1);
DROP TABLE t1;
CREATE TABLE t1(c1 INT, c2 INT, c3 INT, CLUSTERING KEY(c1,c2)) ENGINE=TOKUDB;
INSERT INTO t1 VALUES (1,2,3),(2,3,4),(4,5,6),(6,7,8),(7,8,9),(9,10,11);
SELECT * FROM t1 WHERE c1 IN (SELECT c2 FROM t1);
c1	c2	c3
2	3	4
7	8	9
DROP TABLE t1;
CREATE TABLE t1 (c1 INT , c2 INT, c3 INT, CLUSTERING KEY(c1,c2), CLUSTERING KEY(c1))ENGINE=TOKUDB;
INSERT INTO t1 VALUES (1,2,3),(2,3,4),(3,4,5),(5,6,7);
SELECT * FROM t1 WHERE c1 = 2;
c1	c2	c3
2	3	4
DROP TABLE t1;
DROP TABLE t2;
CREATE TABLE t1 (c1 INT, c2 INT)ENGINE=TOKUDB;
CREATE TABLE t2 (c1 INT, c2 INT,c3 INT, CLUSTERING KEY(c1))ENGINE=TOKUDB;
INSERT INTO t1 VALUES (1,2),(2,3),(3,4),(4,5),(5,6),(6,7);
INSERT INTO t2 VALUES (1,2,3),(2,3,4),(3,4,5),(4,5,6);
SELECT * FROM t2 WHERE t2.c3 IN (SELECT c1 FROM t2) ORDER BY c1 LIMIT 10000;
c1	c2	c3
1	2	3
2	3	4
DROP TABLE t1;
CREATE TABLE t1 (c1 INT, c2 VARCHAR(64),INDEX(c2,c1),PRIMARY KEY (c1));
INSERT INTO t1 VALUES (1,'ABC'),(2,'BCD'),(3,'CDE'),(4,'DEF'),(5,'EFG'),(6,'FGH'),(7,'GHI');
SELECT COUNT(*) FROM t1;
COUNT(*)
7
DROP TABLE t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15;
CREATE TABLE t1 (c1 INT AUTO_INCREMENT PRIMARY KEY, c2 INT, c3 INT, CLUSTERING
KEY(c2), key(c3)) ENGINE=TOKUDB;
INSERT INTO t1(c2,c3) VALUES
(1,2),(2,3),(3,4),(4,5),(5,6),(6,7),(7,8),(7,9),(8,9),(9,10);
SELECT * FROM t1 WHERE c1 = 2;
c1	c2	c3
2	2	3
SELECT * FROM t1 WHERE c2 = 7 ORDER BY c2;
c1	c2	c3
7	7	8
8	7	9
SELECT * FROM t1 WHERE c3 = 9 ORDER BY c1;
c1	c2	c3
8	7	9
9	8	9
SELECT * FROM t1 WHERE c2 between 3 and 9 ORDER BY c2;
c1	c2	c3
3	3	4
4	4	5
5	5	6
6	6	7
7	7	8
8	7	9
9	8	9
10	9	10
UPDATE t1 SET c3 =c3+1 WHERE c2=6;
UPDATE t1 SET c2=c2+1 WHERE c2=6;
SELECT * FROM t1 WHERE c1>2 and c1 < 10 ORDER BY c1;
c1	c2	c3
3	3	4
4	4	5
5	5	6
6	7	8
7	7	8
8	7	9
9	8	9
UPDATE t1 SET c3=c3+1 ORDER BY c1 limit 5;
UPDATE t1 SET c3=c3+1 ORDER BY c2 limit 5;
DROP TABLE t1;
CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 INT);
INSERT INTO t1 VALUES(1,2),(2,3),(3,4),(4,5),(5,6),(6,7),(7,8),(8,9),(9,10),(10,11),(11,12);
SELECT * FROM t1;
c1	c2
1	2
2	3
3	4
4	5
5	6
6	7
7	8
8	9
9	10
10	11
11	12
SELECT * FROM t1 ORDER BY c1;
c1	c2
1	2
2	3
3	4
4	5
5	6
6	7
7	8
8	9
9	10
10	11
11	12
SELECT * FROM t1 ORDER BY c1 DESC;
c1	c2
11	12
10	11
9	10
8	9
7	8
6	7
5	6
4	5
3	4
2	3
1	2
SELECT * FROM t1 WHERE c1 >6;
c1	c2
7	8
8	9
9	10
10	11
11	12
SELECT * FROM t1 WHERE c1 >6 ORDER BY c1;
c1	c2
7	8
8	9
9	10
10	11
11	12
SELECT * FROM t1 WHERE c1 >6 ORDER BY c1 DESC;
c1	c2
11	12
10	11
9	10
8	9
7	8
SELECT * FROM t1 WHERE c1 <6;
c1	c2
1	2
2	3
3	4
4	5
5	6
SELECT * FROM t1 WHERE c1 <6 ORDER BY c1;
c1	c2
1	2
2	3
3	4
4	5
5	6
SELECT * FROM t1 WHERE c1 <6 ORDER BY c1 DESC;
c1	c2
5	6
4	5
3	4
2	3
1	2
UPDATE t1 SET c2=c2+1 ORDER BY c1 LIMIT 2;
UPDATE t1 SET c2=c2+1 ORDER BY c1 DESC LIMIT 2;
DROP TABLE t1;
CREATE TABLE t1 (c1 INT PRIMARY KEY, c2 INT, c3 VARCHAR(28)) ENGINE = TOKUDB;
CREATE TABLE t2 (c1 INT PRIMARY KEY, c2 INT, c3 VARCHAR(128)) ENGINE = INNODB;
CREATE TABLE t3  (c1 INT, c2 INT, c3 INT, KEY(c1)) ENGINE=TOKUDB
PARTITION BY RANGE(c1)
(partition p1 values less than(10),partition p2 values less than(20),partition p3 values less than maxvalue);
BEGIN;
INSERT INTO t1 VALUES (1,2,3);
INSERT INTO t2 VALUES (1,2,3);
commit;
BEGIN;
UPDATE t2 SET c3=c3+1 WHERE c1 = 1;
UPDATE t1 SET c3=c3+1 WHERE c1 = 2;
COMMIT;
BEGIN;
UPDATE t2 SET c3=c3+1 WHERE c1 = 1;
UPDATE t1 SET c3=c3+1 WHERE c1 = 2;
ROLLBACK;
SELECT * FROM t1 ORDER BY c1;
c1	c2	c3
1	2	3
SELECT * FROM t2 ORDER BY c2;
c1	c2	c3
1	2	4
BEGIN;
DELETE FROM t1;
DELETE FROM t2;
COMMIT;
BEGIN;
INSERT INTO t3 VALUES (1,2,3),(3,4,5),(8,9,10),(12,13,56),(17,7,7),(44,43,22),(56,65,3);
COMMIT;
SELECT * FROM t3 ORDER BY c1 LIMIT 5;
c1	c2	c3
1	2	3
3	4	5
8	9	10
12	13	56
17	7	7
SELECT * FROM t3 where c2 =2;
c1	c2	c3
1	2	3
SELECT * FROM t3 where c1 > 17;
c1	c2	c3
44	43	22
56	65	3
SELECT MAX(c2) FROM t3;
MAX(c2)
65
UPDATE t3 SET c2=c2+1;
DELETE FROM t3;
DROP TABLE t3;
CREATE TABLE t3 (c1 INT PRIMARY KEY, c2 INT) ENGINE=TOKUDB;
INSERT INTO t3 VALUES (1,1),(2,2),(3,3);
SELECT MAX(c1) FROM t3;
MAX(c1)
3
show status like '%tokudb_rows%';
Variable_name	Value
Tokudb_rows_inserted	####
Tokudb_rows_read	####
Tokudb_rows_deleted	####
Tokudb_rows_updated	####
show variables like 'tokudb_cpu_nums';
Variable_name	Value
tokudb_cpu_nums	0
# Restart server.
DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t3;
